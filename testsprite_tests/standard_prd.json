{
  "meta": {
    "project": "Maven Deploy Manifest Plugin",
    "date": "2025-11-14",
    "prepared_by": "Software Development Manager"
  },
  "product_overview": "Maven Deploy Manifest Plugin automates the generation of detailed deployment metadata for Maven projects, producing formats suitable for both automated processing (JSON/YAML) and human review (HTML). It enhances build transparency, traceability, and compliance through comprehensive data outputs including build information, dependency analysis, license aggregation, plugin details, and environment configuration.",
  "core_goals": [
    "Provide a single source of truth about Maven project builds for developers, operators, and auditors.",
    "Support reproducible builds by generating consistent, signed, and optionally compressed deployment descriptors.",
    "Offer versatile output formats including JSON, YAML, and a modern HTML report that summarizes key build data.",
    "Enable detailed analysis of dependencies, licenses, properties, plugins, and environment configurations in an extensible, opt-in manner.",
    "Facilitate integration into CI/CD pipelines to improve traceability and compliance.",
    "Support masking sensitive information in properties and plugin configurations to ensure security."
  ],
  "key_features": [
    "Generate deployment descriptors in JSON and YAML formats, with optional HTML reporting for visual summaries.",
    "Collect detailed build info including Git metadata, CI/CD environment details, Maven runtime data, project properties, active profiles, and build plugins.",
    "Analyze Maven project modules and detect executable artifacts (e.g., JAR, WAR, Spring Boot) and container images constructed with popular frameworks.",
    "Produce dependency trees in flat or hierarchical views, with filtering by scope and duplicate detection, supporting export.",
    "Aggregate licensing information from dependencies and identify incompatible licenses with configurable warnings and compliance charts.",
    "Capture grouped properties including project, system, environment, and custom, with filtering and masking for sensitive keys.",
    "Collect effective build plugins details, configurations with sensitive info masked, and optionally check for newer plugin versions.",
    "Extract environment configuration from Spring Boot files to detect service ports, context paths, and actuator endpoints.",
    "Support archiving and signing of descriptor files, webhooks for post-generation automation, and post-generation hooks to run scripts."
  ],
  "user_flow_summary": [
    "User runs the Maven goal 'generate' provided by the deploy-manifest-plugin either locally or in CI/CD pipelines.",
    "The plugin analyzes the Maven project structure, collecting build info, module metadata, dependencies, licenses, properties, plugins, and optionally environment configurations.",
    "Based on user configuration, the plugin produces JSON, YAML, and/or HTML reports summarizing the collected data.",
    "Users can configure sensitive data masking, dependency scopes, license incompatibilities, plugin update checks, and output formatting via system properties or POM configuration.",
    "Generated descriptor files are output to the project root or target directory and can be archived, signed, or posted to a webhook URL.",
    "Users and automated systems consume these deployment manifests for auditing, compliance, troubleshooting, or deployment verification."
  ],
  "validation_criteria": [
    "Correct generation of descriptor files (JSON, YAML) matching the project build configuration.",
    "HTML report accurately reflects descriptor data and includes navigable tabs for modules, dependencies, licenses, properties, and plugins.",
    "Sensitive properties and plugin configurations are properly masked and filtered as configured.",
    "Dependency trees include correct scopes, depths, and structure when enabled.",
    "License aggregation identifies incompatible licenses and emits warnings as configured.",
    "Plugin collection includes effective plugins with accurate versioning and optionally reports plugin update status.",
    "Environment configuration detection from Spring Boot files accurately identifies ports and endpoints.",
    "Post-generation hooks and webhook integrations execute successfully when configured.",
    "Descriptor files can be optionally compressed, signed, and archived with correct naming and contents.",
    "Build runs with the plugin succeed and are reproducible with consistent output under the same configuration."
  ],
  "code_summary": {
    "tech_stack": [
      "Java",
      "Maven",
      "Maven Plugin",
      "JUnit 5",
      "AssertJ",
      "Jackson",
      "SnakeYAML",
      "JGit",
      "Apache HttpClient 5"
    ],
    "features": [
      {
        "name": "Generate Deployment Manifest (Maven goal: generate)",
        "description": "Main Mojo that analyzes the Maven project and produces descriptor.json/yaml and optional HTML, supports dry-run summary, signing, compression, and archiving.",
        "files": [
          "deploy-manifest-plugin/src/main/java/io/github/tourem/maven/plugin/GenerateDescriptorMojo.java"
        ],
        "api_doc": {}
      },
      {
        "name": "Dependency Tree Collection",
        "description": "Collects dependency information (summary + flat/tree). Optionally enriches with transitive tree via Maven DependencyGraphBuilder.",
        "files": [
          "deploy-manifest-core/src/main/java/io/github/tourem/maven/descriptor/service/DependencyTreeCollector.java",
          "deploy-manifest-core/src/main/java/io/github/tourem/maven/descriptor/model/DependencyTreeInfo.java",
          "deploy-manifest-core/src/main/java/io/github/tourem/maven/descriptor/model/DependencyNode.java",
          "deploy-manifest-core/src/main/java/io/github/tourem/maven/descriptor/model/DependencyTreeOptions.java"
        ],
        "api_doc": {}
      },
      {
        "name": "License Collection",
        "description": "Reads dependency POMs from local Maven repo to aggregate licenses, unknowns, and incompatible license warnings.",
        "files": [
          "deploy-manifest-core/src/main/java/io/github/tourem/maven/descriptor/service/LicenseCollector.java"
        ],
        "api_doc": {}
      },
      {
        "name": "Plugins Collection",
        "description": "Collects effective build plugins, executions, phases, and sanitized configuration. Optionally checks for newer plugin versions.",
        "files": [
          "deploy-manifest-core/src/main/java/io/github/tourem/maven/descriptor/service/PluginCollector.java",
          "deploy-manifest-core/src/main/java/io/github/tourem/maven/descriptor/model/PluginInfo.java",
          "deploy-manifest-core/src/main/java/io/github/tourem/maven/descriptor/model/PluginDetail.java",
          "deploy-manifest-core/src/main/java/io/github/tourem/maven/descriptor/model/PluginSummary.java"
        ],
        "api_doc": {}
      },
      {
        "name": "Properties & Profiles Collection",
        "description": "Collects grouped Maven properties (project/maven/custom), and optionally system properties and environment variables with masking.",
        "files": [
          "deploy-manifest-core/src/main/java/io/github/tourem/maven/descriptor/service/PropertyCollector.java",
          "deploy-manifest-core/src/main/java/io/github/tourem/maven/descriptor/model/BuildProperties.java",
          "deploy-manifest-core/src/main/java/io/github/tourem/maven/descriptor/model/PropertyOptions.java"
        ],
        "api_doc": {}
      },
      {
        "name": "Git/CI Build Info Collection",
        "description": "Collects Git metadata (commit, branch, tag, remote) and CI info for traceability.",
        "files": [
          "deploy-manifest-core/src/main/java/io/github/tourem/maven/descriptor/service/GitInfoCollector.java"
        ],
        "api_doc": {}
      },
      {
        "name": "Environment Config Detection",
        "description": "Parses Spring Boot application.yml/properties and profile-specific files to extract ports, context path, and actuator endpoints.",
        "files": [
          "deploy-manifest-core/src/main/java/io/github/tourem/maven/descriptor/service/EnvironmentConfigDetector.java",
          "deploy-manifest-core/src/main/java/io/github/tourem/maven/descriptor/model/EnvironmentConfig.java"
        ],
        "api_doc": {}
      },
      {
        "name": "HTML Report Generation",
        "description": "Generates a modern HTML report (descriptor.html) from the descriptor with tabs for overview, modules, dependencies, licenses, build info.",
        "files": [
          "deploy-manifest-plugin/src/main/java/io/github/tourem/maven/plugin/GenerateDescriptorMojo.java"
        ],
        "api_doc": {}
      }
    ]
  }
}
